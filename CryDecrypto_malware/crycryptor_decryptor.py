from ppadb.client import Client as adb_client
import logging

logging.basicConfig(format='%(asctime)s - %(message)s',level=logging.INFO)

def connect_to_devices():
	client = adb_client(host="127.0.0.1",port=5037)
	devices = client.devices()
	return devices

def check_ransomware_package(device_obj):
	return device_obj.is_installed("com.crydroid")

def decrypt_file_device(device_obj):
	device_obj.shell("am startservice com.crydroid/.services.DecryptionService")

def main():
	logging.info("connect to devices")
	for device in connect_to_devices():
		logging.info("Device => {}".format(device.get_serial_no()))
		if check_ransomware_package(device):
			logging.info("Found Cryptor Ransomware")
			logging.info("Decrypting Back!.....stand by")
			decrypt_file_device(device)
			logging.info("Done :), Have a good day")
		else:
			pass

main()
